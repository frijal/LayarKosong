<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Jelajahi Artikel: Windows, Linux, Religi, & Karir di Layar Kosong</title>
<meta name="description" content="Jelajahi beragam topik mulai dari panduan sistem operasi Windows dan Linux, inspirasi kehidupan, komunitas, hingga artikel religi dan Islam, serta tips karir." />
<meta name="author" content="frijal" />
<meta name="publisher" content="Layar Kosong" />
<meta name="robots" content="index, follow, max-image-preview:large" />
<meta name="google-site-verification" content="zFwmztf9lBRLshQXrDEz_fneZIrtpHzOhAN1Xi62c-s" />
<meta name="yandex-verification" content="8ba05f5f00d79c5a" />
<link rel="canonical" href="https://dalam.web.id/" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed Layar Kosong" href="https://dalam.web.id/rss.xml" />
<link rel="icon" href="/favicon.ico" sizes="any" />
<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
<link rel="apple-touch-icon" href="/ext/icons/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<!-- CSS -->
<!-- <link rel="stylesheet" href="/ext/homepage.css"> -->
<link rel="stylesheet" href="/ext/marquee-url.css" />
<link rel="stylesheet" href="/ext/fontawesome.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Layar Kosong" />
<meta property="og:title" content="Galeri Artikel Layar Kosong: Teknologi, Linux, Religi, dan Karir" />
<meta property="og:description" content="Kumpulan artikel terbaru tentang Linux, Windows, Islam, dan tips karir." />
<meta property="og:url" content="https://dalam.web.id/" />
<meta property="og:image" content="https://dalam.web.id/thumbnail.webp" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="675" />
<meta property="og:locale" content="id_ID" />
<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@frijal" />
<meta name="twitter:creator" content="@frijal" />
<meta name="twitter:title" content="Galeri Artikel Layar Kosong: Teknologi, Linux, Religi, dan Karir" />
<meta name="twitter:description" content="Kumpulan artikel terbaru tentang Linux, Windows, Islam, dan tips karir." />
<meta name="twitter:image" content="https://dalam.web.id/thumbnail.webp" />
<!-- Ads -->
<meta name="google-adsense-account" content="ca-pub-8157928740123992" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8157928740123992" crossorigin="anonymous"></script>
<!-- Structured Data -->
<script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://dalam.web.id/#website","url":"https://dalam.web.id/","name":"Layar Kosong","alternateName":"Blog Frijal","publisher":{"@id":"https://dalam.web.id/#organization"},"potentialAction":{"@type":"SearchAction","target":"https://dalam.web.id/search?q={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"Organization","@id":"https://dalam.web.id/#organization","name":"Layar Kosong","url":"https://dalam.web.id/","logo":{"@type":"ImageObject","url":"https://dalam.web.id/logo.png","width":512,"height":512},"contactPoint":{"@type":"ContactPoint","contactType":"customer support","url":"https://t.me/frijal"}},{"@type":"WebPage","@id":"https://dalam.web.id/#homepage","url":"https://dalam.web.id/","name":"Layar Kosong ‚Äì Teknologi, Linux, Religi, & Karir","isPartOf":{"@id":"https://dalam.web.id/#website"},"about":{"@id":"https://dalam.web.id/#organization"},"description":"Jelajahi panduan sistem operasi Windows dan Linux, inspirasi kehidupan, hingga artikel religi dan tips karir di Layar Kosong."},{"@type":"Person","@id":"https://dalam.web.id/#person","name":"Fakhrul Rijal","url":"https://dalam.web.id/","sameAs":["https://twitter.com/frijal","https://github.com/frijal","https://linkedin.com/in/frijal","https://www.youtube.com/@frijal"],"jobTitle":"Blogger & Tech Enthusiast","worksFor":{"@id":"https://dalam.web.id/#organization"}}]}</script>
<!-- JS -->
<!-- <script src="/ext/homepage.js"></script> -->
<script src="/ext/marquee-url.js" defer></script>
</head>
    <style>
        :root {
            --primary: #3584e4;
            --secondary: #ffbf00; /* Amber */
            --bg-body: #f4f7f9;
            --bg-card: #ffffff;
            --text-main: #1a1a1a;
            --text-muted: #555555;
            --border: #e2e8f0;
            --glass: rgba(255, 255, 255, 0.8);
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-body: #0f172a;
                --bg-card: #1e293b;
                --text-main: #f1f5f9;
                --text-muted: #94a3b8;
                --border: #334155;
                --glass: rgba(30, 41, 59, 0.8);
            }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg-body); 
            color: var(--text-main);
            transition: 0.3s ease;
            line-height: 1.6;
        }

        .container { max-width: 1250px; margin: 0 auto; padding: 0 20px; }
        
        /* HEADER & GLASS EFFECT */
        header {
            position: sticky; top: 0; z-index: 1000;
            background: var(--glass);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }
        .nav-box { display: flex; justify-content: space-between; align-items: center; }
        .logo { text-decoration: none; font-family: 'Montserrat'; font-weight: 800; font-size: 1.5rem; color: var(--primary); }
        .logo span { color: var(--secondary); }
        .logo:hover { opacity: 0.9; text-decoration: none; }
        
        .search-bar {
            background: var(--bg-body);
            border: 1px solid var(--border);
            padding: 8px 15px; border-radius: 20px;
            color: var(--text-main); outline: none; width: 250px;
        }

        /* FEATURED HERO */
        .hero {
            transition: opacity 0.3s ease, transform 0.3s ease;
            margin: 30px 0; border-radius: 20px; overflow: hidden;
            position: relative; height: 450px; display: flex; align-items: flex-end;
            background-size: cover; background-position: center;
            box-shadow: var(--shadow);
            animation: fadeIn 1s ease;
        }
        .hero-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
        }
        .hero-content { position: relative; padding: 40px; color: white; max-width: 700px; }
        .hero-cat { background: var(--secondary); color: black; padding: 4px 12px; border-radius: 5px; font-weight: bold; font-size: 0.8rem; }

        /* FILTER & ARCHIVE BAR */
        .toolbar {
            display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap;
            align-items: center; justify-content: space-between;
        }
        .pills { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .pill { 
            padding: 8px 18px; border-radius: 20px; background: var(--bg-card); 
            border: 1px solid var(--border); cursor: pointer; white-space: nowrap;
            transition: 0.3s; font-size: 0.9rem;
        }
        .pill.active { background: var(--primary); color: white; border-color: var(--primary); }
        .pill:hover { transform: translateY(-2px); box-shadow: var(--shadow); }

        .archive-box select {
            padding: 8px; border-radius: 8px; background: var(--bg-card);
            color: var(--text-main); border: 1px solid var(--border);
        }

        /* MAIN LAYOUT */
        .main-grid { display: grid; grid-template-columns: 1fr 350px; gap: 30px; }

        /* ARTICLE CARDS */
        .news-feed { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        .card { 
            background: var(--bg-card); border-radius: 15px; overflow: hidden;
            border: 1px solid var(--border); transition: 0.3s;
            display: flex; flex-direction: column;
        }
        .card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        .card-img { height: 180px; width: 100%; object-fit: cover; }
        .card-body { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-title { font-family: 'Montserrat'; font-size: 1.1rem; margin-bottom: 10px; line-height: 1.4; }
        .card-excerpt { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 15px; flex-grow: 1; }
        
        /* SIDEBAR STICKY */
        aside { position: sticky; top: 90px; height: fit-content; }
        .sidebar-box { 
            background: var(--bg-card); padding: 20px; border-radius: 15px; 
            border: 1px solid var(--border); margin-bottom: 25px;
        }
        .sidebar-title { font-family: 'Montserrat'; margin-bottom: 20px; border-left: 4px solid var(--primary); padding-left: 10px; }
        .mini-item { display: flex; gap: 12px; margin-bottom: 15px; align-items: center; }
        .mini-thumb { width: 70px; height: 70px; border-radius: 10px; object-fit: cover; flex-shrink: 0; }
        .mini-text h4 { font-size: 0.85rem; line-height: 1.3; }

        /* SKELETON ANIMATION */
        .skeleton { background: #e2e8f0; animation: pulse 1.5s infinite ease-in-out; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* CONTACT FORM */
        .contact-card {
            background: var(--primary); color: white; padding: 30px; border-radius: 15px; text-align: center;
        }
        .contact-card input, .contact-card textarea {
            width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: none;
        }

        /* --- TOAST NOTIFICATION STYLES --- */
#toast-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
}

.toast {
    background: #2ecc71; /* Warna hijau sukses */
    color: white;
    padding: 15px 25px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    margin-top: 10px;
    /* Animasi masuk */
    animation: slideIn 0.5s ease forwards;
    transition: opacity 0.5s ease;
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

.toast-hide {
    opacity: 0;
}
        
/* --- FOOTER 2 KOLOM INTEGRATED --- */
.page-footer {
    background: var(--bg-card);
    border-top: 1px solid var(--border);
    padding: 60px 0 40px;
    margin-top: 50px;
}

.footer-content {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    gap: 60px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    align-items: start;
}

.footer-section {
    display: flex;
    flex-direction: column;
    gap: 25px;
}

/* Tagline Kiri */
.footer-section p {
    font-size: 1.15rem;
    color: var(--text-main);
    font-weight: 700;
    line-height: 1.4;
    margin: 0;
}

/* Sosmed di Kiri */
.footer-social {
    display: flex;
    flex-direction: row; /* Paksa sejajar ke samping */
    flex-wrap: nowrap;   /* Jangan biarkan ikon turun ke baris baru di desktop */
    gap: 15px;           /* Jarak antar ikon */
    align-items: center;
    font-size: 1.8rem;
}

.footer-social a {
    color: var(--text-muted);
    transition: 0.3s ease;
    display: inline-flex; /* Memastikan ikon di dalam link terpusat */
    text-decoration: none;
}

.footer-social a:hover {
    color: var(--primary);
    transform: translateY(-5px);
    text-decoration: none;
}

/* Link di Kanan */
.footer-links {
    display: flex;
    flex-direction: row; /* Paksa sejajar ke samping */
    flex-wrap: nowrap;   /* Jangan biarkan ikon turun ke baris baru di desktop */
    gap: 12px;
}

.footer-links a {
    color: var(--text-muted);
    font-size: 0.95rem;
    text-decoration: none;
    transition: 0.2s;
}

.footer-links a:hover {
    color: var(--primary);
    padding-left: 5px;
}

/* Hak Cipta di Kanan Bawah */
.footer-copyright {
    margin-top: 10px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
}

.footer-copyright p {
    font-size: 0.8rem !important; /* Lebih kecil agar tidak dominan */
    font-weight: 400 !important;
    color: var(--text-muted) !important;
}

/* --- MOBILE RESPONSIVE --- */
@media (min-width: 1101px) {
    .footer-social {
        justify-content: flex-start; /* Rata kiri di desktop sesuai layout 2 kolom */
        text-decoration: none;
    }
}

@media (max-width: 1100px) {
    .footer-content {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 40px;
    }

    .footer-section {
        align-items: center;
    }

    .footer-links {
        flex-direction: row;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
    }

    .footer-copyright {
        border-top: none;
        padding-top: 0;
    }
}

        /* RESPONSIVE */
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
            .hero { height: 350px; }
        }

/* CARD CLICKABLE */
.card-link {
    display: flex;
    flex-direction: column;
    height: 100%;
    text-decoration: none;
    color: inherit;
    position: relative;
}

.card-link::after {
    content: "";
    position: absolute;
    inset: 0;
}

.card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    will-change: transform;
}

.card-category {
    color: var(--primary);
    font-weight: 700;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Footer sejajar */
.card-footer {
    margin-top: auto;
    padding: 0.75rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85rem;
    background: var(--glass);
    backdrop-filter: blur(10px);
}

/* Tanggal */
.card-date {
    color: var(--text-muted);
}

/* Read more */
.card-readmore {
    color: var(--primary);
    font-weight: 600;
}

.card-readmore:hover {
    color: var(--secondary); /* Aksen amber pas hover, biar playful */
}

/* Hover efek */
.card:hover {
    transform: translateY(-6px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.card:hover .card-img {
    transform: scale(1.04);
}

.card-link:hover .card-title {
    text-decoration: none;
    color: var(--primary); /* Judul sedikit highlight biru */
}

.card-img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    transition: transform 0.4s ease;
}

.card-title {
    color: var(--text-main);
    padding: 1rem 1rem 0.5rem;
    margin: 0;
    font-size: 1.1rem;
    transition: color 0.3s ease;
}

.card-summary {
    color: var(--text-muted);
    padding: 0 1rem;
    font-size: 0.9rem;
}

.card-body small {
    display: inline-block;
    margin-bottom: 6px;
    letter-spacing: 0.3px;
}

/* --- CUSTOM TOOLTIP --- */
.mini-text h4 {
    position: relative;
    cursor: help;
}

/* Kotak Tooltip */
.mini-text h4::after {
    content: attr(data-tooltip); /* Mengambil teks dari atribut data-tooltip */
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%) scale(0.8);
    background: var(--bg-card);
    color: var(--text-main);
    padding: 10px 15px;
    border-radius: 8px;
    font-size: 0.75rem;
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    width: 220px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    border: 1px solid var(--primary);
    visibility: hidden;
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 100;
    line-height: 1.4;
    pointer-events: none;
}

/* Panah Tooltip */
.mini-text h4::before {
    content: '';
    position: absolute;
    bottom: 110%;
    left: 50%;
    transform: translateX(-50%);
    border: 8px solid transparent;
    border-top-color: var(--primary);
    visibility: hidden;
    opacity: 0;
    transition: 0.3s;
    z-index: 100;
}

/* Efek Hover */
.mini-text h4:hover::after,
.mini-text h4:hover::before {
    visibility: visible;
    opacity: 1;
    transform: translateX(-50%) scale(1);
}

/* Styling Header Baru */
.header-tools {
    display: flex;
    align-items: center;
    gap: 15px;
}

.archive-box-header {
    display: flex;
    gap: 8px;
}

.archive-box-header select {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--bg-body);
    color: var(--text-main);
    font-size: 0.85rem;
    outline: none;
}

#resetArchive {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.1rem;
    padding: 0 5px;
    transition: transform 0.2s;
}

#resetArchive:hover {
    transform: scale(1.2);
}
.search-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.clear-btn {
    position: absolute;
    right: 12px;
    background: none;
    border: none;
    cursor: pointer;
    display: none; /* Tetap sembunyi jika input kosong */
    font-size: 0.9rem; /* Ukuran disesuaikan agar pas dengan bar pencarian */
    padding: 0;
    line-height: 1;
    filter: grayscale(1); /* Membuatnya sedikit lebih menyatu (opsional) */
    transition: 0.2s;
}

.clear-btn:hover {
    filter: grayscale(0); /* Merah menyala saat kursor di atasnya */
    transform: scale(1.1);
}

@media (max-width: 768px) {
    .nav-box { flex-direction: column; gap: 15px; }
    .header-tools { width: 100%; justify-content: space-between; }
    .search-wrapper { flex-grow: 1; }
}

    </style>
<body>

<header>
    <div class="container nav-box">
        <a href="https://dalam.web.id/" class="logo" title="Beranda" rel="home">Layar <span>Kosong</span></a>

        <div class="header-tools">
            <div class="archive-box-header">
                <button id="resetArchive" class="clear-btn" title="Reset Filter" style="display: none; margin-right: 5px;">üîÑ</button>

                <select id="yearFilter"><option value="">Tahun</option></select>
                <select id="monthFilter" disabled><option value="">Bulan</option></select>
            </div>

            <div class="search-wrapper">
                <input type="text" id="searchInput" class="search-bar" placeholder="cari artikel berita seru...">
                <button id="clearSearch" class="clear-btn">‚ùå</button>
            </div>
        </div>
    </div>
</header>

<div class="container">
    <div id="hero" class="hero skeleton"></div>

    <div class="toolbar">
        <div class="pills" id="categoryPills">
            <div class="pill active" onclick="filterByCat('All')">Kategori</div>
        </div>
    </div>

    <div class="main-grid">
        <main>
            <div id="newsFeed" class="news-feed">
                </div>
            <div style="text-align: center; margin: 40px 0;">
                <button id="loadMore" class="pill" style="padding: 12px 40px; background: var(--primary); color: white;">Muat Lebih Banyak</button>
            </div>
        </main>

        <aside>
            <div class="sidebar-box">
                <h3 class="sidebar-title">Rekomendasi Acak</h3>
                <div id="sidebarRandom"></div>
                <button onclick="renderSidebar()" style="background:none; border:none; color:var(--primary); cursor:pointer; font-size:0.8rem; width:100%; text-align:right;">‚Üª Acak Lagi</button>
            </div>

           <div class="contact-card">
    <h3>Hubungi Kami</h3>
    <p style="font-size: 0.8rem; margin-bottom: 10px;">Kirim saran atau kerjasama</p>
    
    <input type="text" id="contact-name" placeholder="Nama" required>
    <input type="email" id="contact-email" placeholder="Email" required>
    <textarea id="contact-message" placeholder="Pesan" required></textarea>
    
    <button type="button" onclick="sendToWA()" class="pill" style="width:100%; background: var(--secondary); color:black; font-weight:bold; margin-top:10px; border:none; cursor:pointer;">
        Kirim ke WhatsApp
    </button>
</div>
        </aside>
    </div>
</div>

<footer class="page-footer">
    <div class="footer-content">
        <div class="footer-section">
            <p>Mari Kita Jaga Supaya Data Pribadi Tetap Aman.</p>
            <div class="footer-social">
                <a href="https://facebook.com/frijal" title="Facebook" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://github.com/frijal" title="GitHub" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-square-github"></i></a>
                <a href="https://linkedin.com/in/frijal" title="LinkedIn" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-linkedin"></i></a>
                <a href="https://t.me/frijal" title="Telegram" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-telegram"></i></a>
                <a href="https://threads.net/frijal" title="Threads" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-threads"></i></a>
                <a href="https://youtube.com/@frijal" title="YouTube" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-youtube"></i></a>
            </div>
        </div>

        <div class="footer-section">
            <div class="footer-links">
                <a href="/feed.html">RSS Feed</a>
                <a href="/sitemap.html">Peta Situs</a>
                <a href="https://frijal.github.io" target="_blank">Kartu Nama</a>
                <a href="/disclaimer.html" target="_blank">Disclaimer</a>
            </div>
            <div class="footer-copyright">
                <p>üÑØ 2025 - Layar Kosong - Dibuat dengan ‚ù§Ô∏è dari Balikpapan.</p>
            </div>
        </div>
    </div>
</footer>
<script>
    let allData = [];
    let displayedData = [];
    let limit = 6;

async function fetchData() {
        try {
            const res = await fetch('artikel.json');
            const data = await res.json();
            
            // Kosongkan array sebelum mengisi (menghindari duplikasi saat refresh)
            allData = [];

            // Flatten data dari kategori JSON
            for (const cat in data) {
                data[cat].forEach(item => {
                    allData.push({
                        category: cat,
                        title: item[0],
                        // Menambahkan folder 'artikel/' sebelum slug file .html
                        url: 'artikel/' + item[1], 
                        img: item[2],
                        date: new Date(item[3]),
                        summary: item[4]
                    });
                });
            }
            
            // Sort terbaru (berdasarkan tanggal)
            allData.sort((a, b) => b.date - a.date);
            displayedData = [...allData];

            initSite();
        } catch (e) {
            console.error("Gagal ambil data", e);
            document.getElementById('newsFeed').innerHTML = "<p>Gagal memuat konten. Pastikan file JSON tersedia.</p>";
        }
    }

    function initSite() {
        renderHero();
        renderCategories();
        renderArchives();
        renderSidebar();
        renderFeed();
        
// Search Logic
document.getElementById('searchInput').addEventListener('input', (e) => {
    const val = e.target.value.toLowerCase();
    const searchInput = document.getElementById('searchInput');
const clearBtn = document.getElementById('clearSearch');
const heroSection = document.getElementById('hero');
const yearSelect = document.getElementById('yearFilter');
const monthSelect = document.getElementById('monthFilter');
const resetArchiveBtn = document.getElementById('resetArchive');
const heroSection = document.getElementById('hero');

// Fungsi untuk Reset Total Arsip
resetArchiveBtn.addEventListener('click', () => {
    yearSelect.value = "";
    monthSelect.value = "";
    monthSelect.disabled = true;
    resetArchiveBtn.style.display = 'none';
    heroSection.style.display = 'flex'; // Hero muncul lagi

    displayedData = [...allData]; // Kembalikan semua data
    renderFeed(true);
    renderSidebar();
});

// Update fungsi runFilters agar tombol reset muncul/sembunyi
function runFilters() {
    const y = yearSelect.value;
    const m = monthSelect.value;

    if (y !== "") {
        heroSection.style.display = 'none';
        resetArchiveBtn.style.display = 'block'; // Munculkan tombol üîÑ
    } else {
        heroSection.style.display = 'flex';
        resetArchiveBtn.style.display = 'none'; // Sembunyikan jika di posisi "Tahun"
    }

    displayedData = allData.filter(i => {
        const matchY = y ? i.date.getFullYear() == y : true;
        const matchM = m !== "" ? i.date.getMonth() == m : true;
        return matchY && matchM;
    });

    renderFeed(true);
    renderSidebar();
}

searchInput.addEventListener('input', (e) => {
    const val = e.target.value;

    // Tampilkan/Sembunyikan tombol X
    clearBtn.style.display = val.length > 0 ? 'block' : 'none';

    // Sembunyikan Hero jika sedang mencari
    heroSection.style.display = val.length > 0 ? 'none' : 'flex';

    // Jalankan filter
    runSearch(val.toLowerCase());
});

clearBtn.addEventListener('click', () => {
    searchInput.value = '';
    clearBtn.style.display = 'none';
    heroSection.style.display = 'flex';

    // Reset data ke awal
    displayedData = [...allData];
    renderFeed(true);
    renderSidebar();
    searchInput.focus();
});

function runSearch(keyword) {
    displayedData = allData.filter(i =>
        i.title.toLowerCase().includes(keyword) ||
        i.summary.toLowerCase().includes(keyword)
    );
    renderFeed(true);
    renderSidebar();
}


    // Logika Otomatis Sembunyikan Hero
    if (val.length > 0) {
        // Jika ada teks di kolom pencarian, sembunyikan hero
        heroSection.style.display = 'none';
    } else {
        // Jika kolom pencarian kosong, tampilkan kembali hero
        heroSection.style.display = 'flex'; // atau 'block' sesuai CSS awal
    }

    // Filter data seperti biasa
    displayedData = allData.filter(i =>
        i.title.toLowerCase().includes(val) ||
        i.summary.toLowerCase().includes(val)
    );

    renderFeed(true);
    renderSidebar(); // Pastikan sidebar juga terupdate tanpa duplikat
});

        // Archive Change
        document.getElementById('yearFilter').onchange = runFilters;
        document.getElementById('monthFilter').onchange = runFilters;
    }

    function renderHero() {
        const h = allData[0];
        const el = document.getElementById('hero');
        el.classList.remove('skeleton');
        el.style.backgroundImage = `url('${h.img}')`;
        el.innerHTML = `
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <span class="hero-cat">${h.category}</span>
                <h1 style="font-family:'Montserrat'; font-size:2.5rem; margin:15px 0;">${h.title}</h1>
                <p>${h.summary}</p>
                <a href="${h.url}" class="pill active" style="margin-top:20px; display:inline-block; text-decoration:none;">dimana isinya?</a>
            </div>
        `;
    }

    function renderFeed(reset = false) {
        if(reset) limit = 6;
        const container = document.getElementById('newsFeed');
        container.innerHTML = '';
        
        const items = displayedData.slice(0, limit);
        items.forEach(item => {
            container.innerHTML += `
                <div class="card" style="animation: fadeIn 0.5s ease">
                    <img src="${item.img}" class="card-img" alt="img" onerror="this.src='thumbnail.webp'">
                   <div class="card-body">
    <a href="${item.url}" class="card-link">
        <small style="color:var(--primary); font-weight:bold">
            ${item.category}
        </small>

        <h3 class="card-title">
            ${item.title}
        </h3>

        <p class="card-excerpt">
            ${item.summary.substring(0, 200)}...
        </p>

        <div class="card-footer">
            <time class="card-date" datetime="${item.date.toISOString()}">
                ${item.date.toLocaleDateString('id-ID', {
                    day: '2-digit',
                    month: 'long',
                    year: 'numeric'
                })}
            </time>
             </div>
    </a>
</div>
</div>
            `;
        });
    }

function renderSidebar() {
    const side = document.getElementById('sidebarRandom');
    side.innerHTML = '';

    const displayedTitles = displayedData.slice(0, limit).map(item => item.title);
    const availableForSidebar = allData.filter(item => !displayedTitles.includes(item.title));

    const randoms = [...availableForSidebar]
        .sort(() => 0.5 - Math.random())
        .slice(0, 5);

    randoms.forEach(item => {
        // Membersihkan summary dari tanda petik agar tidak merusak HTML
        const cleanSummary = item.summary.replace(/"/g, '&quot;');

        side.innerHTML += `
            <div class="mini-item" style="animation: fadeIn 0.5s ease">
                <img src="${item.img}" class="mini-thumb" onerror="this.src='thumbnail.webp'">
                <div class="mini-text">
                    <h4 data-tooltip="${cleanSummary}">
                        <a href="${item.url}" style="text-decoration:none; color:inherit;">
                            ${item.title.substring(0, 50)}...
                        </a>
                    </h4>
                    <small style="color:var(--text-muted)">${item.date.toLocaleDateString('id-ID')}</small>
                </div>
            </div>
        `;
    });
}

    function renderCategories() {
        const cats = [...new Set(allData.map(i => i.category))];
        const container = document.getElementById('categoryPills');
        cats.forEach(c => {
            container.innerHTML += `<div class="pill" onclick="filterByCat('${c}', this)">${c}</div>`;
        });
    }

function renderArchives() {
    const years = [...new Set(allData.map(i => i.date.getFullYear()))].sort((a, b) => b - a);
    const ySelect = document.getElementById('yearFilter');

    // Reset dan isi Tahun
    ySelect.innerHTML = '<option value="">Pilih Tahun</option>';
    years.forEach(y => ySelect.innerHTML += `<option value="${y}">${y}</option>`);

    // Pastikan dropdown bulan di-reset di awal
    updateMonthDropdown();
}

function updateMonthDropdown() {
    const ySelect = document.getElementById('yearFilter');
    const mSelect = document.getElementById('monthFilter');
    const selectedYear = ySelect.value;
    const monthsName = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];

    mSelect.innerHTML = '<option value="">Bulan</option>';

    if (selectedYear) {
        // Cari bulan apa saja yang ada di tahun terpilih
        const availableMonths = [...new Set(
            allData
                .filter(i => i.date.getFullYear() == selectedYear)
                .map(i => i.date.getMonth())
        )].sort((a, b) => a - b);

        availableMonths.forEach(m => {
            mSelect.innerHTML += `<option value="${m}">${monthsName[m]}</option>`;
        });
        mSelect.disabled = false;
    } else {
        mSelect.disabled = true; // Matikan bulan jika tahun belum dipilih
    }
}

function runFilters() {
    const ySelect = document.getElementById('yearFilter');
    const mSelect = document.getElementById('monthFilter');
    const heroSection = document.getElementById('hero');

    const y = ySelect.value;
    const m = mSelect.value;

    // --- LOGIKA SEMBUNYIKAN HERO ---
    if (y !== "") {
        // Jika tahun dipilih, sembunyikan hero agar hasil filter naik ke atas
        heroSection.style.display = 'none';
    } else {
        // Jika filter direset ke "Tahun", tampilkan hero lagi
        heroSection.style.display = 'flex';
    }

    // Jalankan filter data
    displayedData = allData.filter(i => {
        const matchY = y ? i.date.getFullYear() == y : true;
        const matchM = m !== "" ? i.date.getMonth() == m : true;
        return matchY && matchM;
    });

    renderFeed(true);
    renderSidebar();
}

// Tambahkan event listener khusus untuk cascading
document.getElementById('yearFilter').addEventListener('change', () => {
    updateMonthDropdown(); // Update list bulan dulu
    runFilters();          // Baru jalankan filter data
});

document.getElementById('monthFilter').addEventListener('change', runFilters);

    function filterByCat(cat, el) {
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        if(el) el.classList.add('active');
        
        displayedData = cat === 'All' ? [...allData] : allData.filter(i => i.category === cat);
        renderFeed(true);
    }

    document.getElementById('loadMore').onclick = () => {
        limit += 6;
        renderFeed();
        renderSidebar();
    };

    fetchData();
    
    function showToast(message) {
    // Buat container jika belum ada
    let container = document.getElementById('toast-container');
    if (!container) {
        container = document.createElement('div');
        container.id = 'toast-container';
        document.body.appendChild(container);
    }

    // Buat elemen toast
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.innerHTML = `<i class="fa-solid fa-circle-check"></i> <span>${message}</span>`;
    
    container.appendChild(toast);

    // Hilangkan toast otomatis setelah 3 detik
    setTimeout(() => {
        toast.classList.add('toast-hide');
        setTimeout(() => toast.remove(), 500);
    }, 3000);
}

function sendToWA() {
    const name = document.getElementById('contact-name').value;
    const email = document.getElementById('contact-email').value;
    const message = document.getElementById('contact-message').value;
    
    // Validasi sederhana: Nama dan Pesan wajib diisi
    if(!name || !message) {
        alert("Nama dan Pesan jangan dikosongkan ya, Bosku!");
        return;
    }

    // Ganti dengan nomor WhatsApp kamu (format 62...)
    const noWA = "6281578163858"; 
    
    // Menyusun format pesan WhatsApp
    const text = `Halo Layar Kosong!%0A%0A*Nama:* ${name}%0A*Email:* ${email}%0A*Pesan:* ${message}`;
    
    // Panggil notifikasi Toast (fungsi showToast ada di chat sebelumnya)
    showToast("Membuka WhatsApp... Pesan siap dikirim!");

    // Jeda 1 detik agar user bisa lihat notifikasi suksesnya dulu
    setTimeout(() => {
        window.open(`https://wa.me/${noWA}?text=${text}`, '_blank');
        
        // Bersihkan input setelah berhasil
        document.getElementById('contact-name').value = "";
        document.getElementById('contact-email').value = "";
        document.getElementById('contact-message').value = "";
    }, 1200);
}
</script>

</body>
</html>
