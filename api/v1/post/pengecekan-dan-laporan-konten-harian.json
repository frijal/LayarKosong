{
  "id": "pengecekan-dan-laporan-konten-harian",
  "slug": "pengecekan-dan-laporan-konten-harian",
  "title": "Pengecekan & Laporan Konten Harian - Otomasi GitHub Actions ğŸ”†",
  "category": "ğŸ”† Lainnya",
  "published_at": "2025-10-22T11:53:56.642+00:00",
  "url": "https://dalam.web.id/artikel/pengecekan-dan-laporan-konten-harian.html",
  "image": "https://dalam.web.id/img/pengecekan-dan-laporan-konten-harian.webp",
  "content": {
    "text": "ğŸ”† Pengecekan & Laporan Konten Harian Workflow ini berjalan otomatis di GitHub Actions setiap hari untuk menjaga kebersihan dan keteraturan konten di situs dalam.web.id. Ia melakukan dua hal penting: membersihkan gambar yang tidak dipakai lagi (orphan) dan membuat laporan jumlah konten serta badge status yang bisa ditampilkan di halaman utama. Santai tapi disiplin ğŸ˜„ ğŸ§© Alur Kerja (Flow) â° Jadwal Otomatis (21:00 UTC) ğŸ§¹ Cleanup Orphan ğŸ“Š Reporting ğŸš€ Commit & Push ğŸ§­ Tujuan Workflow Membersihkan gambar orphan: Menghapus file .webp yang tidak punya pasangan .html. Membuat laporan harian: Menghitung jumlah file HTML, WebP, PNG, dan membuat badge status otomatis. ğŸ“œ Kode Workflow Lengkap name: ğŸ”† Pengecekan & Laporan Konten Harian on: schedule: - cron: '0 21 * * *' workflow_dispatch: jobs: cleanup: runs-on: ubuntu-latest permissions: contents: write steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - name: Cari dan Hapus Gambar Orphan id: cleanup_step run: | echo \"ğŸ§¹ Memulai proses...\" DELETED_COUNT=0 for webp_file in img/*.webp; do base=$(basename \"$webp_file\" .webp) html=\"artikel/${base}.html\" if [ ! -f \"$html\" ]; then git rm -f \"$webp_file\" DELETED_COUNT=$((DELETED_COUNT+1)) fi done echo \"deleted_count=$DELETED_COUNT\" >> $GITHUB_OUTPUT - if: steps.cleanup_step.outputs.deleted_count != '0' run: | git config user.name \"github-actions[bot]\" git config user.email \"github-actions[bot]@users.noreply.github.com\" git commit -m \"chore(cleanup): hapus gambar orphan\" git pull origin main --rebase git push reporting: needs: cleanup runs-on: ubuntu-latest permissions: contents: write steps: - uses: actions/checkout@v4 - run: sudo apt-get update && sudo apt-get install -y jq - name: Setup Variabel id: vars run: | TARGETS=\"artikel img\" DATE=$(date +'%m-%d') REPORT=\"mini/${DATE}-laporan_konten.txt\" echo \"report=$REPORT\" >> $GITHUB_OUTPUT echo \"targets=$TARGETS\" >> $GITHUB_OUTPUT - name: Hitung File id: count run: | TARGETS=\"${{ steps.vars.outputs.targets }}\" declare -A counts for ext in html webp png; do counts[$ext]=$(find $TARGETS -maxdepth 1 -type f -iname \"*.$ext\" | wc -l) done counts[all]=$(find $TARGETS -maxdepth 1 -type f | wc -l) for k in \"${!counts[@]}\"; do echo \"$k=${counts[$k]}\" >> $GITHUB_OUTPUT; done - name: Buat Laporan run: | REPORT=\"${{ steps.vars.outputs.report }}\" DATE=$(date +'%d %B %Y') mkdir -p mini { echo \"LAPORAN KONTEN ($DATE)\" echo \"===========================\" echo \"HTML=${{ steps.count.outputs.html }}, WEBP=${{ steps.count.outputs.webp }}, PNG=${{ steps.count.outputs.png }}\" echo \"\" echo \"URL Artikel:\" find artikel -maxdepth 1 -iname \"*.html\" | sort } > \"$REPORT\" - name: Buat Badge JSON run: | mkdir -p mini html=${{ steps.count.outputs.html }} webp=${{ steps.count.outputs.webp }} color=$(if (( html > webp )); then echo red; elif (( html < webp )); then echo green; else echo blue; fi) jq -n --arg h \"$html\" --arg w \"$webp\" '{schemaVersion:1,label:\"html/webp\",message:(\"\\($h)/\\($w)\"),color:\"'$color'\"}' > mini/html_webp_badge.json - name: Commit & Push run: | git config user.name \"github-actions[bot]\" git config user.email \"github-actions[bot]@users.noreply.github.com\" git add mini/* if ! git diff --staged --quiet; then git commit -m \"chore: update laporan & badge konten\" git pull origin main --rebase git push fi ğŸ“ˆ Hasil Akhir Setelah workflow selesai, folder mini/ akan berisi: 10-22-laporan_konten.txt â€” laporan jumlah file html_webp_badge.json â€” badge status Beberapa laporan sebelumnya (maksimal 7 hari) ğŸ’¡ Kesimpulan Dengan workflow ini, semuanya jadi otomatis: file lama dibersihkan, laporan diperbarui, dan badge status konten dibuat setiap hari tanpa sentuhan manual. Workflow kecil tapi sangat membantu menjaga kualitas konten di dalam.web.id ğŸš€",
    "html": "<header>\n    <h1>ğŸ”† Pengecekan &amp; Laporan Konten Harian</h1>\n<div id=\"iposbrowser\"></div>\n  </header>\n  <main>\n    <p>Workflow ini berjalan otomatis di <strong>GitHub Actions</strong> setiap hari untuk menjaga kebersihan dan keteraturan konten di situs <em>dalam.web.id</em>. Ia melakukan dua hal penting: membersihkan gambar yang tidak dipakai lagi (orphan) dan membuat laporan jumlah konten serta badge status yang bisa ditampilkan di halaman utama. Santai tapi disiplin ğŸ˜„</p>\n    <h2>ğŸ§© Alur Kerja (Flow)</h2>\n    <div class=\"flowchart\">\n      <div class=\"node\">â° Jadwal Otomatis (21:00 UTC)</div>\n      <svg class=\"arrow\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"var(--accent)\" stroke-width=\"3\"><path d=\"M5 20 L35 20 M25 10 L35 20 L25 30\"></path></svg>\n      <div class=\"node\">ğŸ§¹ Cleanup Orphan</div>\n      <svg class=\"arrow\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"var(--accent)\" stroke-width=\"3\"><path d=\"M5 20 L35 20 M25 10 L35 20 L25 30\"></path></svg>\n      <div class=\"node\">ğŸ“Š Reporting</div>\n      <svg class=\"arrow\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"var(--accent)\" stroke-width=\"3\"><path d=\"M5 20 L35 20 M25 10 L35 20 L25 30\"></path></svg>\n      <div class=\"node\">ğŸš€ Commit &amp; Push</div>\n    </div>\n    <h2>ğŸ§­ Tujuan Workflow</h2>\n    <ul>\n      <li><strong>Membersihkan gambar orphan:</strong> Menghapus file <code>.webp</code> yang tidak punya pasangan <code>.html</code>.</li>\n      <li><strong>Membuat laporan harian:</strong> Menghitung jumlah file HTML, WebP, PNG, dan membuat badge status otomatis.</li>\n    </ul>\n    <h2>ğŸ“œ Kode Workflow Lengkap</h2>\n    <pre><code>name: ğŸ”† Pengecekan &amp; Laporan Konten Harian\non:\n  schedule:\n    - cron: '0 21 * * *'\n  workflow_dispatch:\njobs:\n  cleanup:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n      - name: Cari dan Hapus Gambar Orphan\n        id: cleanup_step\n        run: |\n          echo \"ğŸ§¹ Memulai proses...\"\n          DELETED_COUNT=0\n          for webp_file in img/*.webp; do\n            base=$(basename \"$webp_file\" .webp)\n            html=\"artikel/${base}.html\"\n            if [ ! -f \"$html\" ]; then\n              git rm -f \"$webp_file\"\n              DELETED_COUNT=$((DELETED_COUNT+1))\n            fi\n          done\n          echo \"deleted_count=$DELETED_COUNT\" &gt;&gt; $GITHUB_OUTPUT\n      - if: steps.cleanup_step.outputs.deleted_count != '0'\n        run: |\n          git config user.name \"github-actions[bot]\"\n          git config user.email \"github-actions[bot]@users.noreply.github.com\"\n          git commit -m \"chore(cleanup): hapus gambar orphan\"\n          git pull origin main --rebase\n          git push\n  reporting:\n    needs: cleanup\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: actions/checkout@v4\n      - run: sudo apt-get update &amp;&amp; sudo apt-get install -y jq\n      - name: Setup Variabel\n        id: vars\n        run: |\n          TARGETS=\"artikel img\"\n          DATE=$(date +'%m-%d')\n          REPORT=\"mini/${DATE}-laporan_konten.txt\"\n          echo \"report=$REPORT\" &gt;&gt; $GITHUB_OUTPUT\n          echo \"targets=$TARGETS\" &gt;&gt; $GITHUB_OUTPUT\n      - name: Hitung File\n        id: count\n        run: |\n          TARGETS=\"${{ steps.vars.outputs.targets }}\"\n          declare -A counts\n          for ext in html webp png; do\n            counts[$ext]=$(find $TARGETS -maxdepth 1 -type f -iname \"*.$ext\" | wc -l)\n          done\n          counts[all]=$(find $TARGETS -maxdepth 1 -type f | wc -l)\n          for k in \"${!counts[@]}\"; do echo \"$k=${counts[$k]}\" &gt;&gt; $GITHUB_OUTPUT; done\n      - name: Buat Laporan\n        run: |\n          REPORT=\"${{ steps.vars.outputs.report }}\"\n          DATE=$(date +'%d %B %Y')\n          mkdir -p mini\n          {\n            echo \"LAPORAN KONTEN ($DATE)\"\n            echo \"===========================\"\n            echo \"HTML=${{ steps.count.outputs.html }}, WEBP=${{ steps.count.outputs.webp }}, PNG=${{ steps.count.outputs.png }}\"\n            echo \"\"\n            echo \"URL Artikel:\"\n            find artikel -maxdepth 1 -iname \"*.html\" | sort\n          } &gt; \"$REPORT\"\n      - name: Buat Badge JSON\n        run: |\n          mkdir -p mini\n          html=${{ steps.count.outputs.html }}\n          webp=${{ steps.count.outputs.webp }}\n          color=$(if (( html &gt; webp )); then echo red; elif (( html &lt; webp )); then echo green; else echo blue; fi)\n          jq -n --arg h \"$html\" --arg w \"$webp\" '{schemaVersion:1,label:\"html/webp\",message:(\"\\($h)/\\($w)\"),color:\"'$color'\"}' &gt; mini/html_webp_badge.json\n      - name: Commit &amp; Push\n        run: |\n          git config user.name \"github-actions[bot]\"\n          git config user.email \"github-actions[bot]@users.noreply.github.com\"\n          git add mini/*\n          if ! git diff --staged --quiet; then\n            git commit -m \"chore: update laporan &amp; badge konten\"\n            git pull origin main --rebase\n            git push\n          fi</code></pre>\n    <h2>ğŸ“ˆ Hasil Akhir</h2>\n    <p>Setelah workflow selesai, folder <code>mini/</code> akan berisi:</p>\n    <ul>\n      <li><code>10-22-laporan_konten.txt</code> â€” laporan jumlah file</li>\n      <li><code>html_webp_badge.json</code> â€” badge status</li>\n      <li>Beberapa laporan sebelumnya (maksimal 7 hari)</li>\n    </ul>\n    <h2>ğŸ’¡ Kesimpulan</h2>\n    <p>Dengan workflow ini, semuanya jadi otomatis: file lama dibersihkan, laporan diperbarui, dan badge status konten dibuat setiap hari tanpa sentuhan manual. Workflow kecil tapi sangat membantu menjaga kualitas konten di <strong>dalam.web.id</strong> ğŸš€</p>\n  <div id=\"pesbukdiskus\"></div>\n  </main>\n  \n  <!-- âš¡ Animasi ringan -->\n  \n<div class=\"search-floating-container\"><input type=\"text\" id=\"floatingSearchInput\" placeholder=\"cari artikel...\" autocomplete=\"off\"><span id=\"floatingSearchClear\" class=\"clear-button\"></span><div id=\"floatingSearchResults\" class=\"floating-results-container\"></div></div>\n<section id=\"related-marquee-section\"><div id=\"related-marquee-container\"></div></section>"
  },
  "meta": {
    "summary": "Workflow GitHub Actions otomatis untuk membersihkan gambar orphan, menghitung jumlah artikel dan cover WebP, serta membuat laporan konten harian di GitHub Pages.",
    "keywords": [],
    "topics": [],
    "prompt_hint": "Workflow GitHub Actions otomatis untuk membersihkan gambar orphan, menghitung jumlah artikel dan cover WebP, serta membuat laporan konten harian di GitHub Pages."
  }
}