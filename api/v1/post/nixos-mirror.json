{
  "id": "nixos-mirror",
  "slug": "nixos-mirror",
  "title": "Skrip nixos-mirror.sh: Atur Mirror Tercepat untuk NixOS",
  "category": "ðŸ§ Linux & Open Source",
  "published_at": "2025-05-25T23:20:38.198+00:00",
  "url": "https://dalam.web.id/artikel/nixos-mirror.html",
  "image": "https://dalam.web.id/img/nixos-mirror.webp",
  "content": {
    "text": "Skrip nixos-mirror.sh: Atur Mirror Tercepat untuk NixOS NixOS menggunakan file nix.conf untuk mengatur substituter (mirror repositori). Dengan menambahkan mirror yang lebih cepat, kita bisa mempercepat proses seperti nix-env dan nixos-rebuild. Skrip ini akan mengotomatiskan proses tersebut. Peringatan Penting: Jalankan skrip ini dengan hak akses sudo karena akan mengubah file sistem di /etc/nix/nix.conf. Selain itu, pastikan Anda mengganti placeholder trusted-public-keys dengan kunci publik yang valid dari mirror yang Anda gunakan. Kode Skrip Skrip ini akan secara otomatis membuat backup dari file konfigurasi Anda yang ada, lalu menambahkan substituter baru. #!/bin/bash # nixos-mirror.sh â€” atur substituter mirror tercepat NixOS set -e CONF_FILE=\"/etc/nix/nix.conf\" BACKUP=\"/etc/nix/nix.conf.backup.$(date +%F)\" echo \"[INFO] Membackup konfigurasi lama ke $BACKUP ...\" sudo cp \"$CONF_FILE\" \"$BACKUP\" echo \"[INFO] Menambahkan substituter mirror...\" sudo tee -a \"$CONF_FILE\" >/dev/null <<'EOF' # Tambahan substituter mirror cepat substituters = https://cache.nixos.org https://mirror.sjtu.edu.cn/nix-channels/store trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= mirror.sjtu.edu.cn-1:PASTE_PUBLIC_KEY_HERE EOF echo \"[INFO] Update channel...\" nix-channel --update echo \"[DONE] Substituter NixOS berhasil ditambahkan. Silakan verifikasi file $CONF_FILE.\"Salin Cara Menggunakan Simpan skrip di atas sebagai file, misalnya nixos-mirror.sh. Temukan kunci publik yang benar untuk mirror yang ingin Anda tambahkan (misalnya, `mirror.sjtu.edu.cn`). Ganti `PASTE_PUBLIC_KEY_HERE` di dalam skrip dengan kunci yang valid. Berikan izin eksekusi pada skrip: chmod +x nixos-mirror.sh. Jalankan skrip dengan hak akses root: sudo ./nixos-mirror.sh. Setelah selesai, proses build dan update NixOS Anda seharusnya akan berjalan lebih cepat dengan memanfaatkan mirror tambahan tersebut.",
    "html": "<h1>Skrip <code>nixos-mirror.sh</code>: Atur Mirror Tercepat untuk NixOS</h1>\n\n                    <p class=\"lead\">NixOS menggunakan file <code>nix.conf</code> untuk mengatur substituter (mirror repositori). Dengan menambahkan mirror yang lebih cepat, kita bisa mempercepat proses seperti <code>nix-env</code> dan <code>nixos-rebuild</code>. Skrip ini akan mengotomatiskan proses tersebut.</p>\n                    <div class=\"warning-box\">\n                        <strong>Peringatan Penting:</strong> Jalankan skrip ini dengan hak akses <code>sudo</code> karena akan mengubah file sistem di <code>/etc/nix/nix.conf</code>. Selain itu, pastikan Anda mengganti placeholder <code>trusted-public-keys</code> dengan kunci publik yang valid dari mirror yang Anda gunakan.\n                    </div>\n                    <h2>Kode Skrip</h2>\n                    <p>Skrip ini akan secara otomatis membuat backup dari file konfigurasi Anda yang ada, lalu menambahkan substituter baru.</p>\n                    <pre class=\"language-bash\"><code id=\"code1\">#!/bin/bash\n# nixos-mirror.sh â€” atur substituter mirror tercepat NixOS\nset -e\nCONF_FILE=\"/etc/nix/nix.conf\"\nBACKUP=\"/etc/nix/nix.conf.backup.$(date +%F)\"\necho \"[INFO] Membackup konfigurasi lama ke $BACKUP ...\"\nsudo cp \"$CONF_FILE\" \"$BACKUP\"\necho \"[INFO] Menambahkan substituter mirror...\"\nsudo tee -a \"$CONF_FILE\" &gt;/dev/null &lt;&lt;'EOF'\n# Tambahan substituter mirror cepat\nsubstituters = https://cache.nixos.org https://mirror.sjtu.edu.cn/nix-channels/store\ntrusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= mirror.sjtu.edu.cn-1:PASTE_PUBLIC_KEY_HERE\nEOF\necho \"[INFO] Update channel...\"\nnix-channel --update\necho \"[DONE] Substituter NixOS berhasil ditambahkan. Silakan verifikasi file $CONF_FILE.\"</code><button class=\"copy-btn\" data-target=\"code1\">Salin</button></pre>\n                    <h2>Cara Menggunakan</h2>\n                    <ol>\n                        <li>Simpan skrip di atas sebagai file, misalnya <code>nixos-mirror.sh</code>.</li>\n                        <li>Temukan kunci publik yang benar untuk mirror yang ingin Anda tambahkan (misalnya, `mirror.sjtu.edu.cn`). Ganti `PASTE_PUBLIC_KEY_HERE` di dalam skrip dengan kunci yang valid.</li>\n                        <li>Berikan izin eksekusi pada skrip: <code>chmod +x nixos-mirror.sh</code>.</li>\n                        <li>Jalankan skrip dengan hak akses root: <code>sudo ./nixos-mirror.sh</code>.</li>\n                    </ol>\n                    <p>Setelah selesai, proses build dan update NixOS Anda seharusnya akan berjalan lebih cepat dengan memanfaatkan mirror tambahan tersebut.</p>"
  },
  "meta": {
    "summary": "Skrip untuk mengatur substituter (mirror) tercepat di NixOS guna mempercepat proses build dan update. Otomatis backup konfigurasi lama.",
    "keywords": [],
    "topics": [],
    "prompt_hint": "Skrip untuk mengatur substituter (mirror) tercepat di NixOS guna mempercepat proses build dan update. Otomatis backup konfigurasi lama."
  }
}