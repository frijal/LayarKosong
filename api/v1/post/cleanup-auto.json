{
  "id": "cleanup-auto",
  "slug": "cleanup-auto",
  "title": "Pembersihan Otomatis Dependencies (Non-Interaktif)",
  "category": "ğŸ–¥ï¸ Teknologi Web, AI & Umum",
  "published_at": "2025-05-01T23:20:38.178+00:00",
  "url": "https://dalam.web.id/artikel/cleanup-auto.html",
  "image": "https://dalam.web.id/thumbnail.webp",
  "content": {
    "text": "ğŸ§¹ Pembersihan Otomatis Dependencies (Non-Interaktif) Kadang kita ingin proyek Node.js di GitHub Pages tetap bersih tanpa perlu konfirmasi manual saat melakukan pembersihan dependencies yang tidak terpakai. Di sinilah mode otomatis berguna: skrip berjalan sepenuhnya tanpa prompt dan cocok diintegrasikan ke workflow GitHub Actions. ğŸ¯ Tujuan Dengan skrip cleanup-auto.js, kita bisa: Memeriksa dependencies yang tidak digunakan. Menghapusnya secara otomatis tanpa input pengguna. Menghapus folder node_modules dan package-lock.json bila perlu. Menjalankan instalasi ulang bersih (npm install). ğŸª„ Petunjuk Penggunaan Simpan skrip berikut di ext/cleanup-auto.js: #!/usr/bin/env node /** * =================================================================== * CLEANUP AUTO v1.1 * Hapus paket tidak terpakai dan reinstall otomatis (non-interaktif) * Cocok untuk workflow GitHub Actions * =================================================================== */ import { execSync } from 'node:child_process'; import depcheck from 'depcheck'; import fs from 'node:fs'; (async () => { console.log('ğŸš€ Memeriksa paket tidak terpakai...'); // FIX: Tambahkan objek kosong {} sebagai argumen kedua untuk 'options' const result = await depcheck(process.cwd(), {}); const unused = [...result.dependencies, ...result.devDependencies]; if (unused.length === 0) { console.log('âœ… Tidak ada paket yang perlu dihapus.'); } else { console.log('ğŸ§¹ Menghapus paket:', unused.join(', ')); execSync(`npm uninstall ${unused.join(' ')}`, { stdio: 'inherit' }); } console.log('ğŸ—‘ï¸ Menghapus node_modules dan package-lock.json...'); fs.rmSync('node_modules', { recursive: true, force: true }); fs.rmSync('package-lock.json', { force: true }); console.log('ğŸ“¦ Instal ulang paket...'); execSync('npm install', { stdio: 'inherit' }); console.log('âœ¨ Cleanup selesai tanpa prompt!'); })(); âš™ï¸ Integrasi ke Workflow GitHub Actions Kita bisa menjadwalkan proses pembersihan otomatis ini langsung dari workflow YAML agar dijalankan misalnya setiap minggu. name: Auto Cleanup Dependencies on: schedule: - cron: '0 21 * * 0' # Setiap Minggu jam 21:00 UTC workflow_dispatch: jobs: cleanup: runs-on: ubuntu-latest steps: - name: Checkout Repository uses: actions/checkout@v4 - name: Setup Node.js uses: actions/setup-node@v4 with: node-version: '20' - name: Install Dependencies run: npm ci - name: Jalankan Cleanup Otomatis run: node ext/cleanup-auto.js ğŸ’¡ Tips Tambahan Gunakan mode ini hanya di branch utama atau staging, agar tidak menghapus paket penting di branch pengembangan. Bisa dikombinasikan dengan workflow build agar repo tetap ramping. Tambahkan log hasil cleanup ke artifact untuk audit. âœ… Kesimpulan Skrip cleanup-auto.js membantu menjaga proyek tetap ringan, bebas sisa dependensi, dan sepenuhnya otomatis tanpa konfirmasi manual. Cocok dijalankan pada server CI/CD seperti GitHub Actions, terutama untuk proyek statis seperti GitHub Pages.",
    "html": "<main>\n  <h1>ğŸ§¹ Pembersihan Otomatis Dependencies (Non-Interaktif)</h1>\n<div id=\"iposbrowser\"></div>\n  <p>\n    Kadang kita ingin proyek Node.js di GitHub Pages tetap bersih tanpa perlu konfirmasi manual saat melakukan pembersihan <em>dependencies</em> yang tidak terpakai.\n    Di sinilah mode otomatis berguna: skrip berjalan sepenuhnya tanpa prompt dan cocok diintegrasikan ke workflow GitHub Actions.\n  </p>\n  <h2>ğŸ¯ Tujuan</h2>\n  <p>\n    Dengan skrip <strong>cleanup-auto.js</strong>, kita bisa:\n  </p>\n  <ul>\n    <li>Memeriksa dependencies yang tidak digunakan.</li>\n    <li>Menghapusnya secara otomatis tanpa input pengguna.</li>\n    <li>Menghapus folder <code>node_modules</code> dan <code>package-lock.json</code> bila perlu.</li>\n    <li>Menjalankan instalasi ulang bersih (<code>npm install</code>).</li>\n  </ul>\n  <h2>ğŸª„ Petunjuk Penggunaan</h2>\n  <p>Simpan skrip berikut di <code>ext/cleanup-auto.js</code>:</p>\n  <pre><code class=\"language-js\">#!/usr/bin/env node\n/**\n * ===================================================================\n * CLEANUP AUTO v1.1\n * Hapus paket tidak terpakai dan reinstall otomatis (non-interaktif)\n * Cocok untuk workflow GitHub Actions\n * ===================================================================\n */\nimport { execSync } from 'node:child_process';\nimport depcheck from 'depcheck';\nimport fs from 'node:fs';\n(async () =&gt; {\n  console.log('ğŸš€ Memeriksa paket tidak terpakai...');\n  // FIX: Tambahkan objek kosong {} sebagai argumen kedua untuk 'options'\n  const result = await depcheck(process.cwd(), {});\n  const unused = [...result.dependencies, ...result.devDependencies];\n  if (unused.length === 0) {\n    console.log('âœ… Tidak ada paket yang perlu dihapus.');\n  } else {\n    console.log('ğŸ§¹ Menghapus paket:', unused.join(', '));\n    execSync(`npm uninstall ${unused.join(' ')}`, { stdio: 'inherit' });\n  }\n  console.log('ğŸ—‘ï¸ Menghapus node_modules dan package-lock.json...');\n  fs.rmSync('node_modules', { recursive: true, force: true });\n  fs.rmSync('package-lock.json', { force: true });\n  console.log('ğŸ“¦ Instal ulang paket...');\n  execSync('npm install', { stdio: 'inherit' });\n  console.log('âœ¨ Cleanup selesai tanpa prompt!');\n})();\n</code></pre>\n  <h2>âš™ï¸ Integrasi ke Workflow GitHub Actions</h2>\n  <p>\n    Kita bisa menjadwalkan proses pembersihan otomatis ini langsung dari workflow YAML agar dijalankan misalnya setiap minggu.\n  </p>\n  <pre><code class=\"language-yaml\">name: Auto Cleanup Dependencies\non:\n  schedule:\n    - cron: '0 21 * * 0'  # Setiap Minggu jam 21:00 UTC\n  workflow_dispatch:\njobs:\n  cleanup:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout Repository\n        uses: actions/checkout@v4\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n      - name: Install Dependencies\n        run: npm ci\n      - name: Jalankan Cleanup Otomatis\n        run: node ext/cleanup-auto.js\n</code></pre>\n  <h2>ğŸ’¡ Tips Tambahan</h2>\n  <ul>\n    <li>Gunakan mode ini hanya di branch utama atau staging, agar tidak menghapus paket penting di branch pengembangan.</li>\n    <li>Bisa dikombinasikan dengan workflow build agar repo tetap ramping.</li>\n    <li>Tambahkan log hasil cleanup ke artifact untuk audit.</li>\n  </ul>\n  <h2>âœ… Kesimpulan</h2>\n  <p>\n    Skrip <code>cleanup-auto.js</code> membantu menjaga proyek tetap ringan, bebas sisa dependensi, dan sepenuhnya otomatis tanpa konfirmasi manual.\n    Cocok dijalankan pada server CI/CD seperti GitHub Actions, terutama untuk proyek statis seperti GitHub Pages.\n  </p>\n <div id=\"pesbukdiskus\"></div>\n<div class=\"search-floating-container\"><input type=\"text\" id=\"floatingSearchInput\" placeholder=\"cari artikel...\" autocomplete=\"off\"><span id=\"floatingSearchClear\" class=\"clear-button\"></span><div id=\"floatingSearchResults\" class=\"floating-results-container\"></div></div>\n<section id=\"related-marquee-section\"><div id=\"related-marquee-container\"></div></section>\n\n\n\n</main>"
  },
  "meta": {
    "summary": "Panduan lengkap menjalankan pembersihan otomatis dependencies dan reinstall Node.js package secara non-interaktif di proyek GitHub Pages menggunakan workflow atau terminal.",
    "keywords": [],
    "topics": [],
    "prompt_hint": "Panduan lengkap menjalankan pembersihan otomatis dependencies dan reinstall Node.js package secara non-interaktif di proyek GitHub Pages menggunakan workflow atau terminal."
  }
}