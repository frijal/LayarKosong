name: Renovate Fast
on:
  schedule:
    # Jalan tiap jam, bisa diubah sesuai kebutuhan
    - cron: '0 * * * *'
  workflow_dispatch: # Bisa jalan manual juga

jobs:
  renovate:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/renovatebot/renovate:full
      # Jalankan container sebagai root agar checkout bisa tulis di workspace
      options: --user root
      # Mount folder 'sementara/' sebagai cache
      volumes:
        - ${{ github.workspace }}/sementara:/tmp/renovate/cache
    steps:
      - name: Checkout repo
        uses: actions/checkout@v6
        with:
          fetch-depth: 1  # hemat waktu

      - name: Run Renovate
        uses: renovatebot/github-action@v44.2.6
        with:
            configurationFile: mini/renovate.json5
            token: ${{ secrets.GH_PAT }}
        env:
          RENOVATE_REPOSITORY_CACHE: enabled


   #   - name: Run Renovate
   #     uses: renovatebot/github-action@v44.2.6
   #     with:
   #       configurationFile: mini/renovate.json5
   #      token: ${{ secrets.RENOVATE_TOKEN }}
   #       renovate-version: 42
   #     env:
   #       RENOVATE_REPOSITORIES: ${{ github.repository }}
   #       RENOVATE_ONBOARDING: "false"
   #       RENOVATE_REQUIRE_CONFIG: "ignored"
