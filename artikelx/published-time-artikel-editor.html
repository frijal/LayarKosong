<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Batch Editor article:published_time</title>
    
    <meta name="description" content="Cara praktis melakukan batch edit meta tag article:published_time untuk optimasi SEO dan manajemen konten yang lebih efisien di blog Anda.">
    <meta name="author" content="Fakhrul Rijal">
    <link rel="canonical" href="https://dalam.web.id/artikel/published-time-artikel-editor.html">
    <meta name="robots" content="index, follow">

    <meta property="og:site_name" content="Layar Kosong">
    <meta property="og:title" content="Batch Editor article:published_time: Kelola Waktu Publikasi dengan Cepat">
    <meta property="og:description" content="Optimalkan alur kerja blogging Anda dengan Batch Editor untuk meta tag waktu publikasi. Lebih rapi, lebih SEO-friendly!">
    <meta property="og:url" content="https://dalam.web.id/artikel/published-time-artikel-editor.html">
    <meta property="og:type" content="article">
    <meta property="og:image" content="https://dalam.web.id/thumbnail.webp">
    <meta property="og:image:alt" content="Ilustrasi Batch Editor article:published_time di Layar Kosong">
    <meta property="og:locale" content="id_ID">

    <meta property="article:published_time" content="2025-12-23T15:39:00+08:00"> <meta property="article:modified_time" content="2025-12-23T15:39:00+08:00">
    <meta property="article:author" content="https://facebook.com/frijal">
    <meta property="article:section" content="Teknologi">
    <meta property="article:tag" content="SEO">
    <meta property="article:tag" content="Web Development">
    <meta property="article:tag" content="Tutorial">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@frijal">
    <meta name="twitter:creator" content="@frijal">
    <meta name="twitter:title" content="Batch Editor article:published_time">
    <meta name="twitter:description" content="Cara praktis edit massal meta tag published_time untuk efisiensi konten blog.">
    <meta name="twitter:image" content="https://dalam.web.id/thumbnail.webp">

    <link rel="icon" href="/favicon.ico">

<style>
body{
  font-family:system-ui, sans-serif;
  max-width:720px;
  margin:40px auto;
  padding:0 16px;
}
label{font-weight:600;display:block;margin-top:16px}
input,button{
  padding:8px 12px;
  margin-top:6px;
}
button{cursor:pointer}
pre{
  background:#111;
  color:#0f0;
  padding:12px;
  max-height:300px;
  overflow:auto;
}
</style>
</head>
<body>

<h1>Batch Inject Published Time</h1>

<label>Tanggal Publish</label>
<input id="dateInput" placeholder="2025-02-12T08:00:00+08:00">

<button id="pickFolder">Pilih Folder HTML</button>
<button id="pickList">Pilih ubahtanggal.txt</button>
<button id="run">Jalankan</button>

<pre id="log"></pre>

<script>
let folderHandle=null;
let listHandle=null;

const log = msg =>
  document.getElementById("log").textContent += msg + "\n";

document.getElementById("pickFolder").onclick = async ()=>{
  folderHandle = await window.showDirectoryPicker();
  log("✔ Folder dipilih");
};

document.getElementById("pickList").onclick = async ()=>{
  [listHandle] = await window.showOpenFilePicker({
    types:[{description:"TXT",accept:{"text/plain":[".txt"]}}]
  });
  log("✔ ubahtanggal.txt dipilih");
};

document.getElementById("run").onclick = async ()=>{
  const date = document.getElementById("dateInput").value.trim();
  if(!date || !folderHandle || !listHandle){
    alert("Lengkapi input & file");
    return;
  }

  const TARGET =
    /<meta\s+property=["']article:published_time["']\s+content=["'][^"']*["']\s*\/?>/gi;

  const NEW_META =
    `<meta property="article:published_time" content="${date}">`;

  const txt = await (await listHandle.getFile()).text();
  const files = txt.split(/\r?\n/).map(v=>v.trim()).filter(Boolean);

  for(const name of files){
    try{
      const fileHandle = await folderHandle.getFileHandle(name);
      const file = await fileHandle.getFile();
      let html = await file.text();

      if(!TARGET.test(html)){
        log(`⚠ Meta tidak ditemukan: ${name}`);
        continue;
      }

      html = html.replace(TARGET, NEW_META);

      const w = await fileHandle.createWritable();
      await w.write(html);
      await w.close();

      log(`✔ Updated: ${name}`);
    }catch(e){
      log(`✖ Gagal: ${name}`);
    }
  }

  log("=== SELESAI ===");
};
</script>

</body>
</html>

