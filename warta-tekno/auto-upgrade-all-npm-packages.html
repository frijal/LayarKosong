<!doctype html><html lang=id prefix="og: /ext/vs-dark.min.css rel=stylesheet><link href=/ext/marquee-url.css rel=stylesheet><link href=https://dalam.web.id/rss.xml rel=alternate title="30 artikel baru bikin." type=application/rss+xml><meta content="Analisis lengkap workflow GitHub Actions untuk meng-upgrade semua paket NPM secara otomatis. Termasuk risiko, perbaikan aman, dan template siap pakai dengan PR, pengujian, dan update minor/patch." name=ai:summary><meta content="Analisis lengkap workflow GitHub Actions untuk meng-upgrade semua paket NPM secara otomatis. Termasuk risiko, perbaikan aman, dan template siap pakai dengan PR, pengujian, dan update minor/patch." name=ai:prompt_hint><link href=https://dalam.web.id/warta-tekno/auto-upgrade-all-npm-packages/ rel=canonical><link href=/favicon.ico rel=icon><link href=https://creativecommons.org/publicdomain/zero/1.0/ rel=license><meta content="Fakhrul Rijal" name=author><meta content="index, follow, max-image-preview:large" name=robots><meta content=max-image-preview:large name=googlebot><meta content=#00b0ed name=theme-color><meta content=@frijal@mastodon.social name=fediverse:creator><meta content=@responaja name=twitter:creator><meta content=@dalam.web.id name=bluesky:creator><meta content="Layar Kosong" property=og:site_name><meta content=id_ID property=og:locale><meta content=article property=og:type><meta content=https://dalam.web.id/warta-tekno/auto-upgrade-all-npm-packages/ property=og:url><meta content="Auto-Upgrade All NPM Packages ‚Äî Workflow GitHub Actions (Analisis, perbaikan, dan template)" property=og:title><meta content="Analisis lengkap workflow GitHub Actions untuk meng-upgrade semua paket NPM secara otomatis. Termasuk risiko, perbaikan aman, dan template siap pakai dengan PR, pengujian, dan update minor/patch." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@responaja name=twitter:site><meta content=175216696195384 property=fb:app_id><meta content=https://facebook.com/frijal property=article:author><meta content=https://facebook.com/frijalpage property=article:publisher><meta content=https://dalam.web.id/img/auto-upgrade-all-npm-packages.webp property=og:image><meta content="Auto-Upgrade All NPM Packages ‚Äî Workflow GitHub Actions (Analisis, perbaikan, dan template)" property=og:image:alt><meta content=1200 property=og:image:width><meta content=675 property=og:image:height><meta content=https://dalam.web.id/img/auto-upgrade-all-npm-packages.webp name=twitter:image><meta content=https://dalam.web.id/img/auto-upgrade-all-npm-packages.webp itemprop=image><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://dalam.web.id/#website","url":"https://dalam.web.id/","name":"Layar Kosong","publisher":{"@type":"Organization","@id":"https://dalam.web.id/#organization","name":"Layar Kosong","url":"https://dalam.web.id","logo":{"@type":"ImageObject","url":"https://dalam.web.id/logo.png","width":384,"height":384}}},{"@type":"Article","@id":"https://dalam.web.id/warta-tekno/auto-upgrade-all-npm-packages/#article","isPartOf":{"@id":"https://dalam.web.id/#website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dalam.web.id/warta-tekno/auto-upgrade-all-npm-packages/"},"license":"https://creativecommons.org/publicdomain/zero/1.0/","headline":"Auto-Upgrade All NPM Packages ‚Äî Workflow GitHub Actions (Analisis, perbaikan, dan template)","description":"Analisis lengkap workflow GitHub Actions untuk meng-upgrade semua paket NPM secara otomatis. Termasuk risiko, perbaikan aman, dan template siap pakai dengan PR, pengujian, dan update minor/patch.","articleSection":"Warta Tekno","keywords":"actions, analisis, auto, github, layar kosong, packages, perbaikan, template, upgrade, warta tekno, workflow","image":{"@type":"ImageObject","url":"https://dalam.web.id/img/auto-upgrade-all-npm-packages.webp","width":1200,"height":675},"author":{"@type":"Person","name":"Fakhrul Rijal","url":"https://dalam.web.id/about"},"publisher":{"@id":"https://dalam.web.id/#organization"},"datePublished":"2025-10-25T13:28:45.315+00:00","dateModified":"2025-10-25T13:28:45.315+00:00"},{"@type":"BreadcrumbList","@id":"https://dalam.web.id/warta-tekno/auto-upgrade-all-npm-packages/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Beranda","item":"https://dalam.web.id/"},{"@type":"ListItem","position":2,"name":"Warta Tekno","item":"https://dalam.web.id/warta-tekno/"},{"@type":"ListItem","position":3,"name":"Auto-Upgrade All NPM Packages ‚Äî Workflow GitHub Actions (Analisis, perbaikan, dan template)","item":"https://dalam.web.id/warta-tekno/auto-upgrade-all-npm-packages/"}]}]}</script><main><article class=article><div class=cover title="Auto Upgrade NPM Packages cover"></div><div class=content><h1 class=title>Auto-Upgrade All NPM Packages ‚Äî Workflow GitHub Actions</h1><div id=iposbrowser></div><div class=meta><span>Ditulis oleh Frijal</span> ‚Ä¢ <span>CI/CD, NPM, GitHub Actions</span> ‚Ä¢ <span>Widescreen & mobile-friendly</span></div><h2>Ringkasan cepat</h2><p>Workflow ini menjalankan upgrade dependency NPM secara otomatis setiap bulan dan bisa dipicu manual. Ia memakai <code class=kbd>npm-check-updates</code> untuk menaikkan versi di <code class=kbd>package.json</code>, lalu meng-install agar <code class=kbd>package-lock.json</code> diperbarui. Di akhir, kalau ada perubahan, workflow melakukan commit dan push ke repo.<div class=tip><svg aria-hidden=true fill=none height=20 stroke=currentColor stroke-width=1.5 viewBox="0 0 24 24" width=20><circle cx=12 cy=12 r=9></circle><path d="M12 7v6M12 16h.01"></path></svg><div>Untuk keamanan, sebaiknya upgrade minor/patch dulu, jalankan test, dan ajukan PR dibanding langsung push ke <code class=kbd>main</code>.</div></div><h2>Analisis bagian per bagian Workflow asli</h2><p>Mari kita bedah workflow GitHub Actions ini secara detail. Ini adalah pipeline otomatis untuk upgrade semua dependency NPM setiap bulan, plus bisa dijalankan manual.<h3>1) Trigger</h3><p>Workflow berjalan manual lewat <code class=kbd>workflow_dispatch</code>, dan terjadwal per bulan, pada tanggal 1, setiap jam 02:00 UTC melalui cron. <code class=kbd>0 2 1 * *</code>. Ini bagus untuk maintenance rutin sekaligus fleksibilitas eksekusi manual.<pre><code class=language-yaml>name: Auto-Upgrade All NPM Packages
on:
  workflow_dispatch:
  schedule:
    - cron: '0 2 1 * *'
</code></pre><h3>2) Lingkungan</h3><p>Runner menggunakan <code class=kbd>ubuntu-latest</code> dan Node.js versi 20. Versi Node terbaru memberi kecepatan dan kompatibilitas yang baik, tapi tetap perlu memastikan project kamu kompatibel (misalnya engine constraints di <code class=kbd>package.json</code>).<pre><code class=language-yaml>
jobs:
  upgrade-dependencies:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          persist-credentials: true # Diperlukan untuk push
</code></pre><h3>3) Upgrade dependency</h3><p>Menggunakan <code class=kbd>npm-check-updates</code> (<code class=kbd>ncu</code>) untuk menaikkan semua versi di <code class=kbd>package.json</code>. Perintah <code class=kbd>ncu -u</code> akan mengambil versi terbaru termasuk rilis mayor‚Äîyang berpotensi breaking change. Setelah itu <code class=kbd>npm install</code> menghasilkan lockfile baru, memastikan lingkungan build deterministik.<pre><code class=language-yaml>
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
      - name: Upgrade all packages
        run: |
          npm install -g npm-check-updates
          ncu -u
          npm install
</code></pre><h3>4) Commit & push</h3><p>Workflow melakukan stage terhadap <code class=kbd>package.json</code> dan <code class=kbd>package-lock.json</code>, lalu commit dan push jika ada perubahan. Mekanisme ini efektif, namun langsung push ke <code class=kbd>main</code> bisa berisiko bila ada upgrade mayor yang merusak build.<pre><code class=language-yaml>
      - name: Commit and push if changes detected
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git add package.json package-lock.json
          # Cek apakah ada perubahan yang di-stage
          if ! git diff --cached --quiet; then
            git commit -m "chore: upgrade all npm packages to latest versions"
            git push
          else
            echo "No dependency upgrades detected."
          fi</code></pre><h2>Kelebihan</h2><ul><li>**Sederhana:** setup minimal, mudah dipahami.<li>**Otomatis:** upgrade rutin tanpa intervensi manual.<li>**Idempotent:** commit hanya saat ada perubahan nyata.<li>**Fleksibel:** bisa dijalankan manual kapan pun.</ul><h2>Risiko dan titik lemah</h2><ul><li>**Upgrade mayor:** <code class=kbd>ncu -u</code> dapat menaikkan ke rilis mayor yang berpotensi breaking.<li>**Tidak ada pengujian:** workflow tidak menjalankan <code class=kbd>npm test</code> atau build sebelum push.<li>**Langsung ke main:** perubahan masuk ke branch utama tanpa review, meningkatkan risiko downtime.<li>**Lockfile vs manifest:** kadang cukup memperbarui <code class=kbd>package-lock.json</code> untuk patch keamanan minor.</ul><h2>Versi yang lebih aman (template siap pakai)</h2><p>Berikut template yang meng-upgrade **minor/patch** saja, menjalankan test, dan membuat **Pull Request** otomatis agar tetap ada review.<pre><code class=language-yaml>name: Safe Auto-Upgrade (Minor/Patch) for NPM
on:
  workflow_dispatch:
  schedule:
    - cron: '0 2 1 * *' # Setiap awal bulan jam 2 UTC
jobs:
  upgrade-dependencies:
    runs-on: ubuntu-latest
    permissions:
      contents: write       # Izin untuk commit/push ke branch
      pull-requests: write # Izin untuk membuat PR
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm' # Mengaktifkan caching npm
      - name: Install dependencies
        run: npm ci # Gunakan ci untuk install dari lockfile
      - name: Upgrade dependencies (minor & patch only)
        id: upgrade # Beri ID untuk cek output
        run: |
          npm install -g npm-check-updates
          # Jalankan ncu, simpan outputnya
          UPGRADES=$(ncu -u --target minor)
          echo "Output ncu: $UPGRADES"
          # Cek apakah ada perubahan di package.json setelah ncu
          if [[ $(git status --porcelain package.json) ]]; then
            echo "changes_detected=true" >> $GITHUB_OUTPUT
            npm install # Install ulang untuk update lockfile
          else
            echo "changes_detected=false" >> $GITHUB_OUTPUT
            echo "Tidak ada upgrade minor/patch yang ditemukan."
          fi
      # Hanya jalankan test jika ada perubahan
      - name: Run tests (if changes detected)
        if: steps.upgrade.outputs.changes_detected == 'true'
        run: |
          npm run build --if-present
          npm test --if-present
        # Tambahkan '|| true' jika test boleh gagal tapi PR tetap dibuat
        # run: (npm run build --if-present && npm test --if-present) || true
      - name: Create Pull Request (if changes detected)
        if: steps.upgrade.outputs.changes_detected == 'true'
        uses: peter-evans/create-pull-request@v6
        with:
          # Token default GITHUB_TOKEN punya izin karena 'permissions' di atas
          # token: ${{ secrets.PAT_FOR_PR }} # Opsional: Gunakan PAT jika butuh trigger workflow lain
          branch: chore/upgrade-deps-${{ github.run_id }}
          title: 'chore: upgrade npm dependencies (minor/patch)'
          commit-message: 'chore: upgrade npm dependencies (minor/patch)'
          body: |
            Upgrade otomatis dependencies menggunakan npm-check-updates (target: minor/patch).
            - Build dan test dijalankan di CI.
            - Perubahan dapat dilihat pada file `package.json` dan `package-lock.json`.
            - Mohon review sebelum di-merge.
          labels: dependencies, chore, automated pr
          reviewers: frijal # Ganti dengan username GitHub Anda/tim
          # assignees: user1,user2
          draft: false # Set true jika ingin PR dibuat sebagai draft</code></pre><p>Nama workflow mudah dikenali di tab Actions. Triggernya <code class=kbd>workflow_dispatch</code> (tombol manual Run workflow) dan <code class=kbd>schedule</code> dengan cron <code class=kbd>0 2 1 * *</code> yang berarti jalan otomatis tiap tanggal 1 jam 02:00 UTC (sekitar jam 9 atau 10 pagi WIB tergantung DST). Job utama (<code class=kbd>upgrade-dependencies</code>) berjalan di runner <code class=kbd>ubuntu-latest</code>. Langkah-langkahnya: checkout kode, setup Node.js versi 20, lalu upgrade semua paket memakai <code class=kbd>npm-check-updates</code> dengan flag <code class=kbd>-u</code> (update <code class=kbd>package.json</code>), baru <code class=kbd>npm install</code> untuk memperbarui <code class=kbd>package-lock.json</code>. Di akhir, kalau ada perubahan pada kedua file tersebut, ia akan melakukan commit dan push langsung ke branch tempat workflow berjalan (biasanya `main` atau `master`).<p>Kelebihannya jelas: sederhana banget setup-nya, otomatis berjalan rutin, aman karena hanya commit jika benar-benar ada perubahan (<code class=kbd>git diff --cached --quiet</code>), dan fleksibel karena bisa dipicu manual kapan saja perlu. Namun, ada potensi masalah serius: <code class=kbd>ncu -u</code> tanpa filter akan menaikkan versi ke *major release* terbaru yang hampir pasti mengandung *breaking changes*. Workflow ini juga tidak punya langkah *testing* (<code class=kbd>npm test</code>) atau *build* (<code class=kbd>npm run build</code>) setelah upgrade, jadi bisa saja kode yang di-push itu rusak. Ditambah lagi, commit langsung ke branch utama tanpa *Pull Request* (PR) itu berisiko mengganggu tim atau bahkan menyebabkan *downtime* jika branch itu langsung ter-deploy. Terakhir, kadang kita hanya perlu update minor/patch di lockfile untuk keamanan tanpa mengubah range versi di `package.json`.<p>Rekomendasi versi yang jauh lebih aman adalah: gunakan <code class=kbd>ncu -u --target minor</code> untuk membatasi upgrade hanya ke versi minor dan patch terbaru dalam range yang diizinkan semver. Setelah upgrade, **wajib** jalankan langkah <code class=kbd>npm install</code>, <code class=kbd>npm run build --if-present</code> (jika ada script build), dan <code class=kbd>npm test --if-present</code> (jika ada script test). Terakhir, gunakan action seperti <code class=kbd>peter-evans/create-pull-request</code> untuk membuat PR otomatis ke branch utama. Dengan begini, perubahan tetap diisolasi di branch baru, diuji oleh CI, dan bisa direview oleh tim sebelum di-merge. Kamu bisa menambahkan label (<code class=kbd>dependencies</code>, <code class=kbd>chore</code>), mengatur reviewer otomatis, dan bahkan menautkan changelog jika perlu di body PR. Untuk monorepo, pertimbangkan menjalankan workflow ini per paket/workspace menggunakan matrix strategy agar lebih terkelola.<p>Kalau kamu ingin hanya lockfile saja tanpa mengubah versi di <code class=kbd>package.json</code>, gantilah langkah upgrade menjadi:<pre><code class=language-bash># Opsi hanya update lockfile sesuai range di package.json
npm update --package-lock-only</code></pre><h2>Tips tambahan biar mulus</h2><ul><li>**Pin engine:** set <code class=kbd>engines</code> di <code class=kbd>package.json</code> jika project butuh Node versi tertentu untuk mencegah error saat GitHub Actions pakai versi berbeda.<li>**Monorepo:** Jika pakai Lerna/Nx/workspaces, jalankan upgrade per paket atau gunakan matrix build agar lebih terisolasi.<li>**Security alerts:** Integrasi Dependabot dari GitHub atau tambahkan step <code class=kbd>npm audit --production</code> di workflow untuk menangkap vulnerability dan patch lebih cepat.<li>**Changelog-aware:** Jika perlu info detail perubahan, tambahkan step kecil yang bisa mencoba mengekstrak bagian relevan dari <code class=kbd>CHANGELOG.md</code> paket yang diupgrade atau link ke rilis GitHub-nya (agak kompleks, biasanya manual review lebih mudah).<li>**Fail-fast:** Pastikan script <code class=kbd>npm test</code> Anda punya coverage yang baik dan akan exit dengan error code jika ada kegagalan, sehingga PR otomatis menandai status check failure.</ul><h2>Bagaimana cara pakai cepat</h2><ul><li>**Salin template:** Ambil workflow ‚ÄúSafe Auto-Upgrade‚Äù di atas dan simpan sebagai file `.github/workflows/upgrade-npm.yml` di repo Anda.<li>**Sesuaikan jadwal:** Ubah nilai `cron` jika ingin jadwal berbeda (misalnya, `0 2 * * 1` untuk setiap Senin jam 2 UTC).<li>**Tambah test:** Pastikan project Anda punya script `test` (dan `build` jika perlu) di `package.json` yang bisa dijalankan dengan `npm test`.<li>**Review PR:** Aktifkan *branch protection rules* di GitHub untuk branch utama Anda dan wajibkan *status checks* (termasuk test dari workflow ini) lulus sebelum PR bisa di-merge.<li>**Reviewer (Opsional):** Ganti `frijal` di bagian `reviewers` pada action `create-pull-request` dengan username GitHub Anda atau tim Anda.</ul><aside class="aside share-section"><div id=pesbukdiskus></div><div id=related-articles-grid></div></aside></div></article></main><footer>üÑØ 2025 Frijal ‚Äî Dibangun dengan GitHub Pages ¬∑ Tema Prism VS Code Dark+</footer><script defer="" src=https://cdnjs.cloudflare.com/ajax/libs/prism/4.1.2/components/prism-core.min.js></script><script defer="" src=https://cdnjs.cloudflare.com/ajax/libs/prism/4.1.2/plugins/autoloader/prism-autoloader.min.js></script><div id=progress></div><a href=https://dalam.web.id/ id=layar-kosong-header></a><div class=search-floating-container><input autocomplete=off id=floatingSearchInput placeholder="cari artikel..."><span class=clear-button id=floatingSearchClear></span><div id=floatingSearchResults class=floating-results-container></div></div><div id=dynamic-nav-container class=floating-nav></div><div id=internal-nav></div><section id=related-marquee-section><div id=related-marquee-container></div></section><script defer="" src=/ext/marquee-url.js></script><script defer="" src=/ext/iposbrowser.js></script><script defer="" src=/ext/markdown.js></script><script defer="" src=/ext/pesbukdiskus.js></script>
<noscript>udah_dijepit_oleh_Fakhrul_Rijal_2026-02-01_07_23</noscript>