<!doctypehtml><html prefix="og: https://ogp.me/ns# article: https://ogp.me/ns/article#"lang=id><meta charset=UTF-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Workflow Cerdas: Satu Job untuk Semua Tugas Perawatan Harian</title><meta content="github actions, workflow, optimasi, puppeteer, ci/cd, single job, frijal pages"name=keywords><link href=apple-touch-icon.png rel=apple-touch-icon><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href=https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap rel=stylesheet><link href=/ext/fontawesome.css rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://dalam.web.id#website","url":"https://dalam.web.id","name":"Layar Kosong","publisher":{"@type":"Organization","@id":"https://dalam.web.id#organization","name":"Layar Kosong","url":"https://dalam.web.id","logo":{"@type":"ImageObject","url":"https://dalam.web.id/logo.png","width":384,"height":384}}},{"@type":"Article","@id":"https://dalam.web.id/warta-tekno/optimasi-workflow-harian-github-actions#article","isPartOf":{"@id":"https://dalam.web.id#website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dalam.web.id/warta-tekno/optimasi-workflow-harian-github-actions"},"license":"https://creativecommons.org/publicdomain/zero/1.0/","headline":"Workflow Cerdas: Satu Job untuk Semua Tugas Perawatan Harian","description":"Tutorial cara mengoptimalkan workflow GitHub Actions dengan menggabungkan beberapa job (screenshots, cleanup, reporting) menjadi satu job tunggal yang efisien dan atomik.","articleSection":"Warta Tekno","keywords":"actions, cerdas, github, harian, layar kosong, optimasi, perawatan, satu, semua, tugas, warta tekno, workflow","image":{"@type":"ImageObject","url":"https://dalam.web.id/img/optimasi-workflow-harian-github-actions.webp","width":1200,"height":675},"author":{"@type":"Person","name":"Fakhrul Rijal","url":"https://dalam.web.id/about"},"publisher":{"@id":"https://dalam.web.id#organization"},"datePublished":"2025-10-22T11:53:56.641+00:00","dateModified":"2025-10-22T11:53:56.641+00:00"},{"@type":"BreadcrumbList","@id":"https://dalam.web.id/warta-tekno/optimasi-workflow-harian-github-actions#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Beranda","item":"https://dalam.web.id"},{"@type":"ListItem","position":2,"name":"Warta Tekno","item":"https://dalam.web.id/warta-tekno"},{"@type":"ListItem","position":3,"name":"Workflow Cerdas: Satu Job untuk Semua Tugas Perawatan Harian","item":"https://dalam.web.id/warta-tekno/optimasi-workflow-harian-github-actions"}]}]}</script><style>:root{--bg-color:#1a1a2e;--primary-color:#16213e;--secondary-color:#0f3460;--text-color:#dcdcdc;--header-color:#fff;--code-bg:#2d2d44;--border-color:#3a3a5a;--accent-generate:#9b59b6;--accent-cleanup:#e67e22;--accent-report:#3498db;--accent-commit:#2ecc71}body{background-color:var(--bg-color);color:var(--text-color);margin:0;padding:20px;font-family:Poppins,sans-serif;line-height:1.8}.container{background-color:var(--primary-color);border-radius:15px;max-width:900px;margin:40px auto;overflow:hidden;box-shadow:0 10px 30px #0006}header{text-align:center;border-bottom:5px solid var(--border-color);background:linear-gradient(45deg,#16213e,#0f3460);padding:40px}header h1{color:var(--header-color);margin:0;font-size:2.5rem;font-weight:700}header .subtitle{color:var(--text-color);max-width:700px;margin-top:10px;margin-left:auto;margin-right:auto;font-size:1.1rem}main{padding:30px 40px}article h2{color:var(--header-color);border-bottom:2px solid var(--border-color);margin-bottom:20px;padding-bottom:10px;font-size:1.8rem}.problem-box{background-color:#e74c3c1a;border-left:5px solid #e74c3c;border-radius:5px;margin:20px 0;padding:15px 20px}.problem-box ul{margin:0;padding:0;list-style:none}.problem-box li{align-items:center;gap:10px;margin-bottom:10px;display:flex}.problem-box li:last-child{margin-bottom:0}.timeline{margin:40px 0;padding-left:30px;position:relative}.timeline:before{content:"";background:var(--border-color);border-radius:2px;width:4px;position:absolute;top:10px;bottom:10px;left:10px}.timeline-item{margin-bottom:40px;position:relative}.timeline-item:last-child{margin-bottom:0}.timeline-icon{color:#fff;border:4px solid var(--primary-color);border-radius:50%;justify-content:center;align-items:center;width:40px;height:40px;font-size:1.4rem;display:flex;position:absolute;top:0;left:-20px}.timeline-icon.generate{background-color:var(--accent-generate)}.timeline-icon.cleanup{background-color:var(--accent-cleanup)}.timeline-icon.report{background-color:var(--accent-report)}.timeline-icon.commit{background-color:var(--accent-commit)}.timeline-content{padding-left:30px}.timeline-content h3{color:var(--header-color);margin:0 0 5px;font-size:1.4rem;font-weight:600}.timeline-content p{margin:0;font-size:1rem}h3{color:var(--header-color);margin-top:30px}.code-block{background-color:var(--code-bg);border:1px solid var(--border-color);border-radius:8px;margin:20px 0;padding:15px;position:relative;overflow-x:auto}.code-block pre{margin:0;padding:0}.code-block code{color:#a6e22e;font-family:Courier New,Courier,monospace;font-size:.9rem}.copy-btn{color:#fff;cursor:pointer;opacity:.8;background-color:#555;border:none;border-radius:5px;padding:8px 12px;transition:opacity .2s,transform .2s;position:absolute;top:10px;right:10px}.copy-btn:hover{opacity:1;transform:scale(1.05)}.share-section{text-align:center;border-top:2px solid var(--border-color);margin-top:50px;padding-top:30px}.share-section h3{color:var(--header-color);margin-bottom:20px}.social-icons{justify-content:center;gap:15px;display:flex}.social-icon,.copy-link{color:#fff;border-radius:50%;justify-content:center;align-items:center;width:45px;height:45px;font-size:1.2rem;text-decoration:none;transition:transform .3s,background-color .3s;display:inline-flex}.social-icon:hover,.copy-link:hover{transform:translateY(-5px)}.twitter{background:#1da1f2}.facebook{background:#1877f2}.whatsapp{background:#25d366}.linkedin{background:#0a66c2}.copy-link{cursor:pointer;background:#6c757d;border:none}footer{text-align:center;background-color:var(--secondary-color);color:var(--text-color);margin-top:40px;padding:20px;font-size:.9rem}footer a{color:var(--header-color);text-decoration:none}@media (width<=768px){body{padding:0}.container{border-radius:0;margin:0}header h1{font-size:1.8rem}main{padding:20px}.timeline{padding-left:20px}.timeline-icon{left:-10px}}</style><link href=/ext/marquee-url.css rel=stylesheet><link title="30 artikel baru bikin."href=https://dalam.web.id/rss.xml rel=alternate type=application/rss+xml><meta content="Tutorial cara mengoptimalkan workflow GitHub Actions dengan menggabungkan beberapa job (screenshots, cleanup, reporting) menjadi satu job tunggal yang efisien dan atomik."name=ai:summary><meta content="Tutorial cara mengoptimalkan workflow GitHub Actions dengan menggabungkan beberapa job (screenshots, cleanup, reporting) menjadi satu job tunggal yang efisien dan atomik."name=ai:prompt_hint><meta content=max-image-preview:large name=googlebot><meta content=#00b0ed name=theme-color><meta content=@frijal@mastodon.social name=fediverse:creator><meta content=@dalam.web.id name=bluesky:creator><meta content=175216696195384 property=fb:app_id><meta content=https://dalam.web.id/img/optimasi-workflow-harian-github-actions.webp itemprop=image><meta content=id_ID property=og:locale><meta content="Layar Kosong"property=og:site_name><link href=/favicon.ico rel=icon><link href=https://dalam.web.id/warta-tekno/optimasi-workflow-harian-github-actions rel=canonical><meta content=https://dalam.web.id/warta-tekno/optimasi-workflow-harian-github-actions property=og:url><meta content="Workflow Cerdas: Satu Job untuk Semua Tugas Perawatan Harian"property=og:title><meta content="Tutorial cara mengoptimalkan workflow GitHub Actions dengan menggabungkan beberapa job (screenshots, cleanup, reporting) menjadi satu job tunggal yang efisien dan atomik."name=description><meta content="Tutorial cara mengoptimalkan workflow GitHub Actions dengan menggabungkan beberapa job (screenshots, cleanup, reporting) menjadi satu job tunggal yang efisien dan atomik."property=og:description><meta content="Fakhrul Rijal"name=author><meta content="index, follow, max-image-preview:large"name=robots><body><div class=container><header><h1>Alur Kerja Cerdas: Satu Job untuk Semua Tugas Perawatan Harian ðŸš€</h1><div id=iposbrowser></div><p class=subtitle>Sebuah studi kasus tentang cara mengubah workflow yang terpisah-pisah menjadi satu proses tunggal yang efisien, bersih, dan atomik.</header><main><article><h2>Masalahnya: Terlalu Banyak Job, Terlalu Boros</h2><p>Awalnya, saya punya workflow harian yang dibagi menjadi beberapa job: satu untuk membersihkan gambar, satu lagi untuk membuat laporan. Secara logika ini benar, tapi secara teknis sangat tidak efisien. Kenapa?<div class=problem-box><ul><li><i class="fas fa-undo"></i> **Boros `checkout`**: Setiap job harus melakukan `checkout` repositori dari awal. Ini membuang waktu.<li><i class="fas fa-random"></i> **Riwayat Commit Berantakan**: Setiap job membuat commit-nya sendiri-sendiri, menghasilkan riwayat Git yang "berisik".<li><i class="fas fa-hourglass-half"></i> **Potensi Masalah Timing**: Data yang digunakan oleh job kedua mungkin sudah usang karena tidak melihat perubahan yang dibuat oleh job pertama.</ul></div><p>Solusinya? Rombak total dan gabungkan semuanya ke dalam **satu job tunggal** dengan urutan proses yang logis.<h2>Solusi: Satu Alur Kerja, Satu Tujuan</h2><p>Dengan satu job, kita bisa mengatur urutan tugas dengan sempurna: **buat dulu aset baru**, **bersihkan yang lama**, lalu **laporkan kondisi finalnya**. Semua dalam satu proses yang mulus.<div class=timeline><div class=timeline-item><div class="timeline-icon generate"><i class="fas fa-camera-retro"></i></div><div class=timeline-content><h3>Langkah 1: Buat Aset Baru (Generate Screenshots)</h3><p>Proses dimulai dengan membuat aset yang mungkin belum ada. Skrip Puppeteer dijalankan untuk membuat screenshot artikel yang belum memiliki gambar cover.</div></div><div class=timeline-item><div class="timeline-icon cleanup"><i class="fas fa-broom"></i></div><div class=timeline-content><h3>Langkah 2: Bersihkan Aset Lama (Cleanup Orphans)</h3><p>Setelah semua gambar yang seharusnya ada sudah dibuat, sekarang waktunya bersih-bersih. Skrip akan mencari gambar `.webp` yang artikelnya sudah tidak ada lagi (orphan) dan menghapusnya.</div></div><div class=timeline-item><div class="timeline-icon report"><i class="fas fa-chart-bar"></i></div><div class=timeline-content><h3>Langkah 3: Laporkan Kondisi Final (Count & Report)</h3><p>Setelah semua aset ada di tempatnya dan yang tidak perlu sudah dibuang, barulah kita menghitung dan membuat laporan. Hasil laporan ini akan menjadi cerminan akurat dari kondisi repo saat itu.</div></div><div class=timeline-item><div class="timeline-icon commit"><i class="fa-brands fa-git-alt"></i></div><div class=timeline-content><h3>Langkah Final: Satu Commit untuk Semua</h3><p>Inilah bagian terbaiknya. Semua perubahanâ€”gambar baru, gambar yang dihapus, dan laporan baruâ€”dikemas ke dalam **satu commit atomik**. Riwayat Git menjadi bersih dan mudah dibaca.</div></div></div><h3>Kode Final Workflow:</h3><p>Inilah wujud akhir dari workflow yang sudah dioptimalkan. Satu job, satu tujuan, efisiensi maksimal.<div class=code-block><pre><code>name: ðŸ”† Perawatan & Laporan Konten Harian
on:
  schedule:
    - cron: '0 21 * * *'
  workflow_dispatch:
jobs:
  maintenance_and_reporting:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: '1. Checkout Repository'
        uses: actions/checkout@v4
        with: { fetch-depth: 0 }
      - name: '2. Setup Node.js'
        uses: actions/setup-node@v4
        with: { node-version: '20' }
      - name: '3. Generate Missing Screenshots'
        run: |
          npm install puppeteer --no-save
          node ext/screenshot-puppeteer.js
      - name: '4. Cari dan Hapus Gambar Orphan'
        id: cleanup_step
        run: |
          # ... (script cleanup) ...
      - name: '5. Hitung File & Buat Laporan'
        run: |
          # ... (script reporting) ...
      - name: '6. Rotasi Laporan Lama'
        run: |
          # ... (script rotasi) ...
      - name: '7. Hapus File Sementara'
        run: rm -rf tmp/ __pycache__/
      - name: '8. Commit All Changes'
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email '41898282+github-actions[bot]@users.noreply.github.com'
          git add img/ mini/
          if ! git diff --staged --quiet; then
            git commit -m "chore: Daily maintenance (screenshots, cleanup, report)"
            git pull origin main --rebase
            git push
          else
            echo "âœ… Tidak ada perubahan baru."
          fi</code></pre><button class=copy-btn><i class="far fa-copy"></i> Salin</button></div></article><div><div id=response></div><div id=related-articles-grid></div></div></main><footer><p>ðŸ„¯ 2025 - [Jaga Data Pribadi Tetap Aman](https://dalam.web.id)</footer></div><script>document.addEventListener(`DOMContentLoaded`,()=>{document.querySelectorAll(`.copy-btn`).forEach(button=>{button.addEventListener(`click`,e=>{let code=e.currentTarget.previousElementSibling.querySelector(`code`).innerText;navigator.clipboard.writeText(code).then(()=>{let originalHTML=e.currentTarget.innerHTML;e.currentTarget.innerHTML=`<i class="fas fa-check"></i> Disalin!`,e.currentTarget.disabled=!0,e.currentTarget.style.backgroundColor=`#27ae60`,setTimeout(()=>{e.currentTarget.innerHTML=originalHTML,e.currentTarget.disabled=!1,e.currentTarget.style.backgroundColor=`#555`},2e3)}).catch(err=>{console.error(`Gagal menyalin teks: `,err)})})})});</script><div id=progress></div><a href=https://dalam.web.id/ id=layar-kosong-header></a><div class=search-floating-container><input placeholder="cari artikel..."autocomplete=off id=floatingSearchInput><span class=clear-button id=floatingSearchClear></span><div class=floating-results-container id=floatingSearchResults></div></div><div class=floating-nav id=dynamic-nav-container></div><div id=internal-nav></div><section id=related-marquee-section><div id=related-marquee-container></div></section><script defer src=/ext/markdown.js></script><script defer src=/ext/marquee-url.js></script><script defer src=/ext/iposbrowser.js></script><script defer src=/ext/response.js></script></html><noscript>schema_oleh_Fakhrul_Rijal_2026-02-23</noscript><noscript>udah_dijepit_oleh_Fakhrul_Rijal_2026-02-23</noscript>